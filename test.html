<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Làm nổi bật văn bản với âm thanh</title>
  <style>
    .highlight {
      background-color: yellow;
      /* Màu nền khi được làm nổi bật */
    }

    #dialog-content {
      width: 600px;
      white-space: pre-wrap !important;
      /* Giữ khoảng trắng và xuống dòng */
      font: 600;
      font-size: larger;
    }

    #dialog-content span {
      display: inline-block;
    }
  </style>
</head>

<body>
  <audio id="myAudio" src="./jameslan.ogg" controls></audio>
  <div id="dialog-content"></div>

  <script>
    const audio = document.getElementById('myAudio');
    const dialogContent = document.getElementById('dialog-content');

    fetch('./jameslan.json')
      .then(response => response.json())
      .then(data => {
        const dialogText = extractDialogText(data.dialog); // Lấy đoạn hội thoại
        // ... (Tiếp tục xử lý dialogText và timestamps)
      })
      .catch(error => {
        console.error('Lỗi khi tải JSON:', error);
      });

    function createHighlightedText(data) {
      let html = "";
      for (const timestamp of data.timestamp) {
        const start = timestamp[0];
        const duration = timestamp[1];
        const word = timestamp[2];
        html += `<span data-start="${start}" data-duration="${duration}">${word}</span>`;

      }
      return html;
    }

    audio.addEventListener('timeupdate', () => {
      const currentTime = audio.currentTime * 1000;
      const spans = dialogContent.querySelectorAll('span');

      spans.forEach(span => {
        const start = parseInt(span.dataset.start, 10);
        const duration = parseInt(span.dataset.duration, 10);

        if (currentTime >= start && currentTime < start + duration) {
          span.classList.add('highlight');
        } else {
          span.classList.remove('highlight');
        }
      });
    });
  </script>
</body>

</html>